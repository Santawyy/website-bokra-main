<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Layout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
      .product-card {
        @apply bg-white p-5 text-center rounded-md shadow-md;
      }
      .product-image {
        @apply w-full max-w-[200px] mx-auto mb-3 transition-all duration-300 ease-in-out;
      }
      .product-title {
        @apply text-xl mb-2;
      }
      .product-description {
        @apply text-gray-600 mb-3;
      }
      .product-price {
        @apply text-lg font-bold text-gray-800 mb-3;
      }
      .add-to-cart-button {
        @apply bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600;
      }
      .cart-box {
        @apply fixed top-5 right-5 bg-white shadow-lg p-5 rounded-lg w-72 border border-gray-200;
      }
      .cart-item {
        @apply flex justify-between items-center mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100;
      }
      .cart-item span {
        @apply text-gray-700 font-medium;
      }
      .cart-quantity {
        @apply flex items-center space-x-3;
      }
      .cart-button {
        @apply bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600 transition-all duration-300 ease-in-out;
      }
      .cart-remove-button {
        @apply mt-5 bg-blue-500 text-white px-5 py-2 rounded-lg w-full text-lg font-semibold hover:bg-blue-600 transition-all duration-300 ease-in-out; ;
      }
      .admin-form {
        @apply bg-white p-5 rounded-md shadow-md max-w-md mx-auto my-5;
      }
      .admin-form input,
      .admin-form textarea {
        @apply w-full px-4 py-2 border border-gray-300 rounded-md mb-3;
      }
      .admin-form button {
        @apply bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600;
      }
       @screen sm {
        .product-grid {
          @apply grid grid-cols-1 gap-5;
        }
      }
      @screen md {
        .product-grid {
          @apply grid grid-cols-2 gap-5;
        }
      }
      @screen lg {
        .product-grid {
          @apply grid grid-cols-3 gap-5;
        }
      } 
    </style>
  </head>
  <body class="bg-gray-100 p-5 font-sans leading-6">
    <header>
      <div class="flex justify-between items-center mb-5">
        <a class="text-lg text-black hover:bg-gray-200 py-3 px-4" href="#home"
          >Home</a
        >
        <a class="text-lg text-black hover:bg-gray-200 py-3 px-4" href="about"
          >About</a
        >
        <a class="text-lg text-black hover:bg-gray-200 py-3 px-4" href="contact"
          >Contact Us</a
        >
        <a
          class="text-lg text-black hover:bg-gray-200 py-3 px-4"
          href="#"
          id="admin-link"
          >Admin Dashboard</a
        >
        <input
          id="searchBar"
          type="text"
          placeholder="Search.."
          class="px-4 py-2 border border-gray-300 rounded-md text-lg focus:outline-none"
        />
      </div>
    </header>
    <main>
      <section class="product-grid" id="product-grid"></section>
    </main>
    <div id="cart-box" class="cart-box">
      <h3 class="text-lg font-bold">Cart</h3>
      <div id="cart-items"></div>
      <button
        id="checkout"
        class="bg-blue-500 text-white px-4 py-2 rounded-md mt-3 hover:bg-blue-600"
      >
        Checkout
      </button>
    </div>

    <section id="admin-dashboard" class="hidden">
      <div class="admin-form">
        <h2 class="text-2xl mb-3">Add New Product</h2>
        <form id="add-product-form">
          <input
            type="text"
            id="product-name"
            placeholder="Product Name"
            required
          />
          <input
            type="text"
            id="product-image"
            placeholder="Image URL"
            required
          />
          <textarea
            id="product-description"
            placeholder="Product Description"
            required
          ></textarea>
          <input
            type="number"
            id="product-price"
            placeholder="Price"
            required
          />
          <button type="submit">Add Product</button>
        </form>
      </div>
      <div class="admin-form">
        <h2 class="text-2xl mb-3">Manage Products</h2>
        <div id="product-list"></div>
      </div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const searchBar = document.getElementById("searchBar");
        const productGrid = document.getElementById("product-grid");
        const cartBox = document.getElementById("cart-box");
        const cartItems = document.getElementById("cart-items");
        const checkoutButton = document.getElementById("checkout");
        const adminLink = document.getElementById("admin-link");
        const adminDashboard = document.getElementById("admin-dashboard");
        const addProductForm = document.getElementById("add-product-form");
        const productList = document.getElementById("product-list");

        let products = JSON.parse(localStorage.getItem("products")) || [];
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        function renderProducts(filteredProducts = products) {
          productGrid.innerHTML = "";
          filteredProducts.forEach((product, index) => {
            const productCard = document.createElement("div");
            productCard.className = "product-card";
            productCard.setAttribute("data-name", product.name);
            productCard.innerHTML = `
              <img src="${product.image}" alt="${product.name}" class="product-image" />
              <h2 class="product-title">${product.name}</h2>
              <p class="product-description">${product.description}</p>
              <p class="product-price">${product.price}</p>
              <button class="add-to-cart-button" data-index="${index}">Add to Cart</button>
            `;
            productGrid.appendChild(productCard);
          });

          productGrid.addEventListener("click", function (event) {
            if (event.target.classList.contains("add-to-cart-button")) {
              const productIndex = event.target.getAttribute("data-index");
              addToCart(products[productIndex]);
            }
          });
        }

        function addToCart(product) {
          const cartItem = cart.find((item) => item.name === product.name);
          if (cartItem) {
            cartItem.quantity++;
          } else {
            cart.push({ ...product, quantity: 1 });
          }
          localStorage.setItem("cart", JSON.stringify(cart));
          renderCart();
        }

        function renderCart() {
          cartItems.innerHTML = "";
          cart.forEach((item, index) => {
            const cartItem = document.createElement("div");
            cartItem.className = "cart-item";
            cartItem.innerHTML = `
              <span>${item.name} - ${item.price}</span>
              <div class="cart-quantity">
                <button class="cart-button" data-action="decrease" data-index="${index}">-</button>
                <span>${item.quantity}</span>
                <button class="cart-button" data-action="increase" data-index="${index}">+</button>
              </div>
              <button class="cart-button" data-action="remove" data-index="${index}">Remove</button>
            `;
            cartItems.appendChild(cartItem);
          });

          const cartButtons = document.querySelectorAll(".cart-button");
          cartButtons.forEach((button) => {
            button.addEventListener("click", function () {
              const action = button.getAttribute("data-action");
              const productIndex = button.getAttribute("data-index");
              if (action === "increase") {
                cart[productIndex].quantity++;
              } else if (
                action === "decrease" &&
                cart[productIndex].quantity > 1
              ) {
                cart[productIndex].quantity--;
              } else if (action === "remove") {
                cart.splice(productIndex, 1);
              }
              localStorage.setItem("cart", JSON.stringify(cart));
              renderCart();
            });
          });

          if (cart.length > 0) {
            cartBox.classList.remove("hidden");
          } else {
            cartBox.classList.add("hidden");
          }
        }

        adminLink.addEventListener("click", function (e) {
          e.preventDefault();
          adminDashboard.classList.toggle("hidden");
        });

        addProductForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const name = document.getElementById("product-name").value;
          const image = document.getElementById("product-image").value;
          const description = document.getElementById(
            "product-description"
          ).value;
          const price = `$${document.getElementById("product-price").value}`;
          products.push({ name, image, description, price });
          localStorage.setItem("products", JSON.stringify(products));
          renderProducts();
          renderProductList();
          addProductForm.reset();
        });

        function renderProductList() {
          productList.innerHTML = "";
          products.forEach((product, index) => {
            const productItem = document.createElement("div");
            productItem.className = "flex justify-between items-center mb-3";
            productItem.innerHTML = `
              <span>${product.name}</span>
              <button onclick="deleteProduct(${index})" class="bg-red-500 text-white px-3 py-1 rounded-md">Delete</button>
              <button onclick="editProduct(${index})" class="bg-yellow-500 text-white px-3 py-1 rounded-md">Edit Price</button>
            `;
            productList.appendChild(productItem);
          });
        }

        window.deleteProduct = function (index) {
          products.splice(index, 1);
          localStorage.setItem("products", JSON.stringify(products));
          renderProducts();
          renderProductList();
        };

        window.editProduct = function (index) {
          const newPrice = prompt("Enter new price:", products[index].price);
          if (newPrice) {
            products[index].price = `$${newPrice}`;
            localStorage.setItem("products", JSON.stringify(products));
            renderProducts();
            renderProductList();
          }
        };

        renderProducts();
        renderCart();

        searchBar.addEventListener("input", function () {
          const searchTerm = searchBar.value.toLowerCase();
          const filteredProducts = products.filter((product) =>
            product.name.toLowerCase().includes(searchTerm)
          );
          renderProducts(filteredProducts);
        });
      });
    </script>
  </body>
</html>
