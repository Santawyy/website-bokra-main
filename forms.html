<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Layout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style type="text/tailwindcss">
        body {
            @apply bg-gray-100 font-sans;
        }
        header {
            @apply bg-white shadow-md sticky top-0 z-50;
        }
        .header-link {
            @apply text-lg font-medium text-gray-700 hover:text-blue-600 transition-colors duration-300 ease-in-out;
        }
        .header-link:hover {
            color: #007BFF;
        }
        .search-bar {
            @apply px-4 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-600 text-lg;
        }
        .container {
            @apply mx-auto px-5;
        }
        .product-grid {
            @apply grid grid-cols-1 gap-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4;
        }
        .product-card {
            @apply bg-white rounded-lg shadow-lg overflow-hidden transform transition duration-300 ease-in-out hover:scale-105 hover:shadow-2xl;
        }
        .product-card img {
            @apply w-full h-60 object-cover mb-4;
        }
        .product-title {
            @apply text-xl font-semibold text-gray-800 mb-2;
        }
        .product-description {
            @apply text-gray-600 text-sm mb-3 px-3;
        }
        .product-price {
            @apply text-lg font-bold text-gray-900 mb-3 px-3;
        }
        .add-to-cart-button {
            @apply w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors duration-300 ease-in-out;
        }
        .cart-box {
            @apply fixed top-5 right-5 bg-white shadow-xl p-6 rounded-lg w-80 border border-gray-200;
        }
        .cart-item {
            @apply flex justify-between items-center mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors duration-300 ease-in-out;
        }
        .cart-button {
            @apply bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors duration-300 ease-in-out;
        }
        .cart-remove-button {
            @apply mt-5 bg-red-600 text-white px-5 py-2 rounded-lg w-full text-lg font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out;
        }
        .admin-form {
            @apply bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto my-6;
        }
        .admin-form input,
        .admin-form textarea {
            @apply w-full px-4 py-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-600;
        }
        .admin-form button {
            @apply bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors duration-300 ease-in-out;
        }
        .charts-container {
            @apply flex justify-between mt-8;
        }
        .pie-chart-container,
        .bar-chart-container {
            @apply bg-white p-6 rounded-lg shadow-lg w-1/2;
        }
    </style>
</head>
<body class="bg-gray-50 p-5 font-sans leading-6">
    <header class="bg-white shadow-md py-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex space-x-6">
                <a class="header-link" href="#home">Home</a>
                <a class="header-link" href="about">About</a>
                <a class="header-link" href="contact">Contact Us</a>
                <a class="header-link" href="admin.html" id="admin-link">Admin Dashboard</a>
            </div>
            <input
                id="searchBar"
                type="text"
                placeholder="Search.."
                class="search-bar"
            />
        </div>
    </header>
    <main class="container mx-auto mt-8">
        <section class="product-grid" id="product-grid"></section>
        <div class="charts-container">
            <div class="pie-chart-container">
                <h2 class="text-2xl font-bold mb-4">Product Types Distribution</h2>
                <div id="pie-chart"></div>
            </div>
            <div class="bar-chart-container">
                <h2 class="text-2xl font-bold mb-4">Purchases per Hour</h2>
                <div id="bar-chart"></div>
            </div>
        </div>
    </main>
    <div id="cart-box" class="cart-box hidden">
        <h3 class="text-lg font-bold mb-4">Cart</h3>
        <div id="cart-items"></div>
        <button
            id="checkout"
            class="bg-blue-600 text-white px-4 py-2 rounded-md mt-4 hover:bg-blue-700 transition-colors duration-300 ease-in-out"
        >
            Checkout
        </button>
    </div>

    <section id="admin-dashboard" class="hidden">
        <div class="admin-form">
            <h2 class="text-2xl font-bold mb-4">Add New Product</h2>
            <form id="add-product-form">
                <input
                    type="text"
                    id="product-name"
                    placeholder="Product Name"
                    required
                />
                <input
                    type="text"
                    id="product-image"
                    placeholder="Image URL"
                    required
                />
                <textarea
                    id="product-description"
                    placeholder="Product Description"
                    required
                ></textarea>
                <input
                    type="number"
                    id="product-price"
                    placeholder="Price"
                    required
                />
                <button type="submit">Add Product</button>
            </form>
        </div>
        <div class="admin-form">
            <h2 class="text-2xl font-bold mb-4">Manage Products</h2>
            <div id="product-list"></div>
        </div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
          const searchBar = document.getElementById("searchBar");
          const productGrid = document.getElementById("product-grid");
          const cartBox = document.getElementById("cart-box");
          const cartItems = document.getElementById("cart-items");
          const checkoutButton = document.getElementById("checkout");
          const adminLink = document.getElementById("admin-link");
          const adminDashboard = document.getElementById("admin-dashboard");
          const addProductForm = document.getElementById("add-product-form");
          const productList = document.getElementById("product-list");
  
          let products = [
              { name: "T-Shirt", image: "https://media.canva.com/v2/mockup-template-rasterize/color0:171618/image0:s3%3A%2F%2Ftemplate.canva.com%2FEAFxZJHbX_A%2F1%2F0%2F933w--inuARME-hI.png/mockuptemplateid:FAqieNuus/size:L?csig=AAAAAAAAAAAAAAAAAAAAAJhD0tbnE14n0VqxoAzsNdltuuwOy-nL34Ri0nmNxpvN&exp=1739739670&osig=AAAAAAAAAAAAAAAAAAAAAGz2oCqBPu7lc1Z0LKv9E2qzsQiLtRfn0TuM0zKCVi_X&seoslug=black-and-orange-typography-never-give-up-stay-strong-t-shirt&signer=marketplace-rpc", description: "Cotton T-shirt", price: "$20", type: "Tops" },
              { name: "Jeans", image: "https://images.napali.app/global/element-products/all/default/xlarge/eljdp00106_element,f_bnt0_frt1.jpg", description: "Slim fit jeans", price: "$40", type: "Bottoms" },
              { name: "Jacket", image: "https://m.media-amazon.com/images/I/61FRgVZBhzL._AC_UY1000_.jpg", description: "Leather jacket", price: "$120", type: "Outerwear" },
              { name: "Sweater", image: "https://images-cdn.ubuy.co.in/654ec7dd9fb75b0f9d500283-aelfric-eden-cable-knit-sweater-women.jpg", description: "Wool sweater", price: "$50", type: "Tops" },
              { name: "Sneakers", image: "https://cdn.thewirecutter.com/wp-content/media/2024/05/white-sneaker-2048px-9320.jpg?auto=webp&quality=75&crop=1.91:1&width=1200", description: "Running shoes", price: "$80", type: "Footwear" },
          ];
  
          let cart = [];
  
          function displayProducts(products) {
              productGrid.innerHTML = "";
              products.forEach((product) => {
                  const productCard = document.createElement("div");
                  productCard.classList.add("product-card");
                  productCard.innerHTML = `
                      <img src="${product.image}" alt="${product.name}" />
                      <div class="px-4 py-3">
                          <h3 class="product-title">${product.name}</h3>
                          <p class="product-description">${product.description}</p>
                          <p class="product-price">${product.price}</p>
                          <button class="add-to-cart-button" data-name="${product.name}" data-image="${product.image}" data-price="${product.price}">Add to Cart</button>
                      </div>
                  `;
                  productGrid.appendChild(productCard);
              });
              
              document.querySelectorAll('.add-to-cart-button').forEach(button => {
                  button.addEventListener('click', addToCart);
              });
          }
  
          function addToCart(event) {
              const productName = event.target.getAttribute('data-name');
              const productImage = event.target.getAttribute('data-image');
              const productPrice = event.target.getAttribute('data-price');
  
              const productInCart = cart.find(item => item.name === productName);
              if (productInCart) {
                  productInCart.quantity++;
              } else {
                  cart.push({ name: productName, image: productImage, price: productPrice, quantity: 1 });
              }
  
              updateCartDisplay();
          }
  
          function updateCartDisplay() {
              cartItems.innerHTML = ""; 
              cart.forEach(item => {
                  const cartItem = document.createElement("div");
                  cartItem.classList.add("cart-item");
                  cartItem.innerHTML = `
                      <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover mr-4" />
                      <div class="flex flex-col">
                          <span class="text-sm">${item.name}</span>
                          <span class="text-sm text-gray-600">Quantity: ${item.quantity}</span>
                      </div>
                      <span class="text-sm text-gray-900">${item.price}</span>
                  `;
                  cartItems.appendChild(cartItem);
              });
  
              if (cart.length > 0) {
                  cartBox.classList.remove("hidden");
              } else {
                  cartBox.classList.add("hidden");
              }
          }
  
          checkoutButton.addEventListener("click", function () {
              alert("Proceeding to checkout...");
              cart = [];
              updateCartDisplay();
          });
  
          searchBar.addEventListener("input", function () {
              const searchTerm = searchBar.value.toLowerCase();
              const filteredProducts = products.filter(product => 
                  product.name.toLowerCase().includes(searchTerm) || 
                  product.description.toLowerCase().includes(searchTerm)
              );
              displayProducts(filteredProducts);
          });
  
          displayProducts(products);
  
          function generateCharts() {
              const pieChart = d3.select("#pie-chart").append("svg")
                  .attr("width", 400)
                  .attr("height", 400)
                  .append("g")
                  .attr("transform", "translate(200,200)");
  
              const data = [
                  { type: "Tops", count: 2 },
                  { type: "Bottoms", count: 1 },
                  { type: "Outerwear", count: 1 },
                  { type: "Footwear", count: 1 },
              ];
  
              const pie = d3.pie().value((d) => d.count);
              const arc = d3.arc().innerRadius(100).outerRadius(150); // Create a donut chart (with inner radius 100)
              const color = d3.scaleOrdinal(d3.schemeCategory10);
  
              const arcs = pieChart.selectAll("arc").data(pie(data)).enter().append("g");
              arcs.append("path")
                  .attr("d", arc)
                  .attr("fill", (d) => color(d.data.type));
              arcs.append("text")
                  .attr("transform", (d) => "translate(" + arc.centroid(d) + ")")
                  .attr("dy", ".35em")
                  .text((d) => d.data.type);
  
              const barChart = d3.select("#bar-chart").append("svg")
                  .attr("width", 500)
                  .attr("height", 350)
                  .append("g")
                  .attr("transform", "translate(40,20)");
  
              const barData = [
                  { hour: "12 AM", count: 5 },
                  { hour: "1 AM", count: 3 },
                  { hour: "2 AM", count: 6 },
                  { hour: "3 AM", count: 2 },
                  { hour: "4 AM", count: 4 },
              ];
  
              const x = d3.scaleBand().domain(barData.map((d) => d.hour)).range([0, 400]).padding(0.1);
              const y = d3.scaleLinear().domain([0, d3.max(barData, (d) => d.count)]).nice().range([280, 0]);
  
              barChart.selectAll(".bar")
                  .data(barData)
                  .enter().append("rect")
                  .attr("class", "bar")
                  .attr("x", (d) => x(d.hour))
                  .attr("y", (d) => y(d.count))
                  .attr("width", x.bandwidth())
                  .attr("height", (d) => 280 - y(d.count))
                  .attr("fill", "#4C9CFF");
  
              barChart.append("g")
                  .attr("transform", "translate(0,280)")
                  .call(d3.axisBottom(x));
  
              barChart.append("g").call(d3.axisLeft(y));
  
              barChart.selectAll(".text")
                  .data(barData)
                  .enter().append("text")
                  .attr("x", (d) => x(d.hour) + x.bandwidth() / 2)
                  .attr("y", (d) => y(d.count) - 10)
                  .attr("text-anchor", "middle")
                  .attr("fill", "black")
                  .text((d) => d.count);
          }
  
          generateCharts();
      });
  </script>
  
</body>
</html>
